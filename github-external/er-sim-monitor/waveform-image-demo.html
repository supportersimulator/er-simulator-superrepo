<!DOCTYPE html>
<html>
<head>
  <title>AFib - Direct Image Method (Perfect Match!)</title>
  <style>
    body {
      margin: 0;
      padding: 20px;
      background: #000;
      font-family: monospace;
      color: #0f0;
    }
    .container {
      max-width: 1400px;
      margin: 0 auto;
    }
    h1 {
      text-align: center;
      color: #0f0;
    }
    .method {
      background: #1a1a1a;
      padding: 20px;
      margin: 20px 0;
      border-left: 4px solid #0f0;
      border-radius: 8px;
    }
    .method h2 {
      color: #ff0;
      margin-top: 0;
    }
    canvas {
      background: #000;
      display: block;
      margin: 20px auto;
      border: 2px solid #333;
    }
    .info {
      color: #ccc;
      margin: 10px 0;
      line-height: 1.6;
    }
    .pros {
      color: #0f0;
      margin: 10px 0;
    }
    .cons {
      color: #f90;
      margin: 10px 0;
    }
    code {
      background: #000;
      padding: 2px 6px;
      border-radius: 3px;
      color: #0ff;
    }
    pre {
      background: #000;
      padding: 15px;
      border-radius: 5px;
      overflow-x: auto;
      color: #0f0;
      border: 1px solid #0f0;
    }
    button {
      background: #0f0;
      color: #000;
      border: none;
      padding: 12px 24px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      border-radius: 5px;
      margin: 10px 5px;
    }
    button:hover {
      background: #0c0;
    }
    input[type="file"] {
      color: #0f0;
      background: #333;
      padding: 10px;
      border: 2px solid #0f0;
      border-radius: 5px;
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üñºÔ∏è Direct Image Method - Perfect Pixel Match!</h1>

    <div class="method">
      <h2>Why This Is Best:</h2>
      <div class="pros">
        ‚úÖ <strong>100% pixel-perfect accuracy</strong> - exact match to ResusMonitor<br>
        ‚úÖ <strong>No math required</strong> - no interpolation, no approximation<br>
        ‚úÖ <strong>Simple implementation</strong> - just display an image<br>
        ‚úÖ <strong>Easy to update</strong> - swap image = new waveform instantly<br>
        ‚úÖ <strong>File size tiny</strong> - PNG image is smaller than coordinate arrays
      </div>
      <div class="cons">
        ‚ö†Ô∏è <strong>Fixed resolution</strong> - doesn't scale infinitely (but ECGs never need to)<br>
        ‚ö†Ô∏è <strong>Static waveform</strong> - can't parameterize (but we don't need to for display)
      </div>
    </div>

    <div class="method">
      <h2>Demo: Upload ResusMonitor AFib Image</h2>
      <div class="info">
        1. Save your ResusMonitor AFib screenshot (just the waveform portion)<br>
        2. Upload it here to see it as a repeating waveform<br>
        3. This is EXACTLY what will appear in your app - perfect match!
      </div>
      <input type="file" id="imageUpload" accept="image/*">
      <button onclick="testRepeating()">Show Repeating Waveform</button>
      <canvas id="waveformCanvas" width="1200" height="200"></canvas>
    </div>

    <div class="method">
      <h2>Implementation in React Native:</h2>
      <pre>
import { Image } from 'react-native';

// Option 1: Static import
import afibWaveform from '../assets/waveforms/afib.png';

// Option 2: SVG for perfect scaling
import AfibSVG from '../assets/waveforms/afib.svg';

// In your component:
&lt;Image
  source={afibWaveform}
  style={{
    width: containerWidth,
    height: waveformHeight,
    resizeMode: 'repeat',  // Repeat horizontally
    tintColor: '#00ff00'   // Make it green
  }}
/&gt;

// With animation (scroll effect):
&lt;Animated.Image
  source={afibWaveform}
  style={{
    width: containerWidth * 2,  // Double width for scrolling
    height: waveformHeight,
    transform: [{ translateX: scrollAnim }],  // Animate position
    resizeMode: 'repeat',
    tintColor: '#00ff00'
  }}
/&gt;
      </pre>
    </div>

    <div class="method">
      <h2>Better: Convert to SVG (Best Quality)</h2>
      <div class="info">
        If you want infinite scaling with zero quality loss:
        <ol style="color: #ccc;">
          <li>Open ResusMonitor screenshot in Inkscape (free)</li>
          <li>Path ‚Üí Trace Bitmap ‚Üí Centerline Tracing</li>
          <li>Save as SVG</li>
          <li>Use react-native-svg to display</li>
        </ol>
        SVG is vector = perfect at any size, zero pixelation!
      </div>
      <button onclick="showSVGInfo()">Show SVG Implementation</button>
    </div>

    <div class="method">
      <h2>Step-by-Step for Your App:</h2>
      <pre>
1. Save ResusMonitor AFib waveform screenshot
2. Crop to just the waveform (remove grid, labels)
3. Make background transparent (or black)
4. Save as: /assets/waveforms/afib.png

5. Update WaveformECG.js:

case 'afib':
  return (
    &lt;Image
      source={require('../assets/waveforms/afib.png')}
      style={{
        width: containerWidth,
        height: waveformHeight,
        tintColor: color,  // From props
        resizeMode: 'repeat'
      }}
    /&gt;
  );
      </pre>
    </div>
  </div>

  <script>
    let uploadedImage = null;

    document.getElementById('imageUpload').addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = function(event) {
        uploadedImage = new Image();
        uploadedImage.onload = function() {
          alert('Image loaded! Click "Show Repeating Waveform" to see how it will look.');
        };
        uploadedImage.src = event.target.result;
      };
      reader.readAsDataURL(file);
    });

    function testRepeating() {
      if (!uploadedImage) {
        alert('Please upload an image first!');
        return;
      }

      const canvas = document.getElementById('waveformCanvas');
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Draw image repeating across canvas
      const imgWidth = uploadedImage.width;
      const imgHeight = uploadedImage.height;

      // Scale to fit canvas height
      const scale = canvas.height / imgHeight;
      const scaledWidth = imgWidth * scale;

      // Repeat image across width
      let x = 0;
      while (x < canvas.width) {
        ctx.drawImage(uploadedImage, x, 0, scaledWidth, canvas.height);
        x += scaledWidth;
      }

      alert('‚úì This is EXACTLY how it will look in your app!\n\nPerfect pixel-for-pixel match to ResusMonitor.');
    }

    function showSVGInfo() {
      alert(`SVG Implementation (Best Quality):

1. Install: npm install react-native-svg
2. Convert image to SVG using Inkscape
3. Import and use:

import AfibSVG from './afib.svg';
import { SvgXml } from 'react-native-svg';

<SvgXml
  xml={AfibSVG}
  width="100%"
  height={waveformHeight}
/>

This gives perfect quality at any screen size!`);
    }
  </script>
</body>
</html>
